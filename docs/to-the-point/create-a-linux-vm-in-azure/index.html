<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en" >

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>Create a Linux VM in Azure | Shubham Chadokar</title>
  
  
  
  <link href="https://schadokar.dev/index.xml" rel="alternate" type="application/rss+xml" title="Shubham Chadokar" />
  
  <link rel="stylesheet" href="/css/style.css" /><link rel='stylesheet' href='https://schadokar.dev/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="canonical" href="https://schadokar.dev/to-the-point/create-a-linux-vm-in-azure/">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-158088106-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
<section class="section">
  
  <nav id="nav-main" class="nav">
    <div id="nav-name" class="nav-left">
      <a id="nav-anchor" class="nav-item" href="https://schadokar.dev">
        <h1 id="nav-heading" class="title is-4">Shubham Chadokar</h1>
      </a>
    </div>
    <div class="nav-right">
      <nav id="nav-items" class="nav-item level is-mobile">
        <nav class="nav-links">
          <a href="/about">About Me</a>
        </nav>
        <nav class="nav-links">
          <a href="/projects">Projects</a>
        </nav>
        <nav class="nav-links">
          <a href="/newsletter">Newsletter</a>
        </nav>
        <nav class="nav-links">
          <a href="/contact">Contact</a>
        </nav>
      </nav>
    </div>
  </nav>

  <nav class="nav">
    
    
  </nav>

  
  <script src="/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/to-the-point">#to-the-point</a>



  
  | <a class="subtitle is-6" href="/tags/azure">#azure</a>
  
  | <a class="subtitle is-6" href="/tags/cloud">#cloud</a>
  

      
    </div>
    <h2 class="subtitle is-6">March 27, 2020</h2>
    <h1 class="title">Create a Linux VM in Azure</h1>
    


    <div class="content">
      <p><img src="../images/clement-h-95YRwf6CNw8-unsplash.jpg" alt="cover"></p>
<p>Create a <a href="https://azure.microsoft.com/en-in/free/">new account</a> in Microsoft Azure. For new users, Azure gives free credits for 30 days and many services free of cost upto a limit for 12 months.</p>
<p>For students, Microsoft also give away many resources and azure credits. You just have to reach to them by their email.</p>
<p>Login to your azure account.</p>
<h3 id="step-1-search-for-ubuntu-1604-lts">Step 1 Search for Ubuntu 16.04 LTS</h3>
<p>In the search bar, search <strong>Ubuntu 16.04 LTS</strong> and select create.</p>
<p><img src="./images/azure-ubuntu.PNG" alt="azure-ubuntu"></p>
<h3 id="step-2-enter-the-project-details">Step 2 Enter the Project details</h3>
<p>In azure, all the related resources must be in a container, this container is known as Resource Group.</p>
<p>Create a new resource group <strong>demo</strong>.</p>
<p><img src="./images/azure-rg.PNG" alt="azure-resource-group"></p>
<h4 id="enter-instance-details">Enter Instance Details</h4>
<p>Enter the virtual machine name <strong>azure-vm</strong>.</p>
<p>Change the VM size to <strong>Standard B2s</strong>.</p>
<p><img src="./images/azure-vm-size.PNG" alt="azure-size"></p>
<blockquote>
<p>The VM's price or default configuration may vary region to region.</p>
</blockquote>
<h4 id="administrator-account">Administrator account</h4>
<p>There are 2 options to login in the VM, using the SSH key or the password.</p>
<blockquote>
<p>Azure currently supports SSH protocol 2 (SSH-2) RSA public-private key pairs with a minimum length of 2048 bits.</p>
</blockquote>
<p>Let's setup the SSH key.</p>
<p>Open any command line tool. Like bash shell.</p>
<p>Use <code>ssh-keygen</code> command to create keys. By default it saves these keys in <code>~/.ssh</code> directory.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ ssh-keygen -m PEM -t rsa -b <span style="color:#ae81ff">4096</span>
Generating public/private rsa key pair.
Enter file in which to save the key <span style="color:#f92672">(</span>/c/Users/admin/.ssh/id_rsa<span style="color:#f92672">)</span>:
Enter passphrase <span style="color:#f92672">(</span>empty <span style="color:#66d9ef">for</span> no passphrase<span style="color:#f92672">)</span>:
Enter same passphrase again:
Your identification has been saved in /c/Users/admin/.ssh/id_rsa.
Your public key has been saved in /c/Users/admin/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:9Hl7Wfo6Et4+QfQ7sKrZr2yaO7Dgb4IVLSIpgsY9ftE admin@LAPTOP-BAVLQDM1
The key<span style="color:#960050;background-color:#1e0010">&#39;</span>s randomart image is:
+---<span style="color:#f92672">[</span>RSA 4096<span style="color:#f92672">]</span>----+
|                 |
|              .  |
|o o   o .    . . |
|+<span style="color:#f92672">=</span> + + E . . .. .|
|+ o o + S o ..o o|
|   . + .   ..o.* |
|    <span style="color:#f92672">=</span> . o  .oo+..|
|   . o o .<span style="color:#f92672">=</span>oo.+. |
|      +. **+o+o+.|
+----<span style="color:#f92672">[</span>SHA256<span style="color:#f92672">]</span>-----+

</code></pre></div><p>Enter the absolute path where you want to save the keys or skip it and press Enter.</p>
<p>Passphrase is required to access the private key while login in the VM.</p>
<p>Enter Username <code>azuredemo</code>.<br>
Open the <code>id_rsa.pub</code> file. This is the public key.<br>
Copy the key and paste it in <strong>SSH public key</strong>.</p>
<p><img src="./images/azure-ssh.PNG" alt="azure-ssh"></p>
<p>Click <strong>Next</strong>.</p>
<h3 id="step-3-disk">Step 3 Disk</h3>
<p>In the Disk section, you can add extra disk space as per your requirement. The Standard B2s VM comes with 32 GB temporary storage.</p>
<p><img src="./images/azure-disk.PNG" alt="azure-disk"></p>
<blockquote>
<p>For the demo purpose, we don't need extra storage.</p>
</blockquote>
<p>Click <strong>Next</strong> to Networking.</p>
<h3 id="step-4-networking">Step 4 Networking</h3>
<p>In the networking, you can define network connectivity for the virtual machine.</p>
<p>For the demo purpose, we are not defining network restriction. Anyone can reach the VM.</p>
<p>Create a new <strong>Network Security Group</strong>.</p>
<p>Add an inbound rule where any ip can access the VM.</p>
<p><img src="./images/azure-vm-nsg.PNG" alt="azure-nsg"></p>
<p>Leave the remaining to defaults setting and click <strong>Review + create</strong>.</p>
<h3 id="step-5-review--create">Step 5 Review + create</h3>
<p>In the review, it will take some time to validate all the configuration. On pass you can see <strong>Validation Passed</strong> message.</p>
<p><img src="./images/azure-vm-validation.PNG" alt="azure-validation"></p>
<p>Click <strong>Create</strong>. It will take some time create the virtual machine.</p>
<h3 id="step-6-connect-to-the-vm">Step 6 Connect to the VM</h3>
<p>Go to the vm overview and click <strong>Connect</strong> and select <strong>SSH</strong>.</p>
<p>Open the bash or any other command line.</p>
<pre><code>ssh -i &lt;private key path&gt; azuredemo@52.172.178.61

ssh -i ~/.ssh/id_rsa azuredemo@52.172.178.61
</code></pre><p>Enter passphrase.</p>
<p><img src="./images/azure-vm-connect.PNG" alt="azure-connect"></p>
<p>You're connected to the VM.</p>
<h3 id="step-7-test-it">Step 7 Test it.</h3>
<p>Install <code>nginx</code> web server in it.</p>
<pre><code>sudo apt-get -y update
sudo apt-get -y install nginx
</code></pre><p>It will take a few seconds to install it. Once it install.<br>
Open the browser and enter the VM ip address.</p>
<p><img src="./images/azure-nginx.PNG" alt="azure-ngx"></p>
<h3 id="step-8-stop-the-vm">Step 8 Stop the VM</h3>
<p>You can save some money by stopping the VM when you're not using it. Go to VM overview and stop it.</p>
<p>Next time when you'll start it only the public ip of the vm will change.</p>
<hr>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="/to-the-point/create-a-linux-vm-in-aws/">Create a Linux VM in AWS</a></li>
	
	<li><a href="/to-the-point/compare-strings-in-golang/">Compare Strings in Golang</a></li>
	
	<li><a href="/to-the-point/how-to-read-and-write-a-file-in-golang/">How to Read and Write a File in Golang?</a></li>
	
	<li><a href="/to-the-point/convert-string-to-int-and-int-to-string-in-golang/">Convert String to Int and Int to String in Golang</a></li>
	
	<li><a href="/to-the-point/swapper-in-golang/">How to use Swapper in Golang?</a></li>
	
</ul>
</div>
      
    </div>
    

    <div>
  <iframe style="margin-top: 20px" width="100%" height="200px" src="https://schadokar.substack.com/embed"
    frameborder="0" scrolling="no"></iframe>
</div>

  </div>
</section>



<section class="section">
  <div class="container">
    <div id="disqus_thread"></div>
    <script>

      

      

      (function () { 
        var d = document, s = d.createElement('script');
        s.src = 'https://schadokar-dev.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>
  </div>
</section>
<section class="section">
  
  <div class="container">
    <p>&copy; <a href="https://schadokar.dev">Shubham Chadokar</a> 2020</p>
    
    
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-158088106-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="\/\/matomo.example.com\/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript>
  <img src="//matomo.example.com/piwik.php?idsite=1&amp;rec=1" style="border:0" alt="" />
</noscript>

<script>
    (function(f, a, t, h, o, m){
        a[h]=a[h]||function(){
            (a[h].q=a[h].q||[]).push(arguments)
        };
        o=f.createElement('script'),
        m=f.getElementsByTagName('script')[0];
        o.async=1; o.src=t; o.id='fathom-script';
        m.parentNode.insertBefore(o,m)
    })(document, window, '\/\/fathom.example.com\/tracker.js', 'fathom');
    fathom('trackPageview');
</script>
</body>

</html>
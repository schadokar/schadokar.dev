<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en" >

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>How to Create a Linux Vm in Gcp | Shubham Chadokar</title>
  
  
  
  <link href="https://schadokar.dev/index.xml" rel="alternate" type="application/rss+xml" title="Shubham Chadokar" />
  
  <link rel="stylesheet" href="/css/style.css" /><link rel='stylesheet' href='https://schadokar.dev/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="canonical" href="https://schadokar.dev/to-the-point/how-to-create-a-linux-vm-in-gcp/">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-158088106-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
<section class="section">
  
  <nav id="nav-main" class="nav">
    <div id="nav-name" class="nav-left">
      <a id="nav-anchor" class="nav-item" href="https://schadokar.dev">
        <h1 id="nav-heading" class="title is-4">Shubham Chadokar</h1>
      </a>
    </div>
    <div class="nav-right">
      <nav id="nav-items" class="nav-item level is-mobile">
        <nav class="nav-links">
          <a href="/about">About Me</a>
        </nav>
        <nav class="nav-links">
          <a href="/projects">Projects</a>
        </nav>
        <nav class="nav-links">
          <a href="/newsletter">Newsletter</a>
        </nav>
        <nav class="nav-links">
          <a href="/contact">Contact</a>
        </nav>
      </nav>
    </div>
  </nav>

  <nav class="nav">
    
    
  </nav>

  
  <script src="/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/to-the-point">#to-the-point</a>



  
  | <a class="subtitle is-6" href="/tags/gcp">#gcp</a>
  
  | <a class="subtitle is-6" href="/tags/cloud">#cloud</a>
  

      
    </div>
    <h2 class="subtitle is-6">March 29, 2020</h2>
    <h1 class="title">How to Create a Linux Vm in Gcp</h1>
    


    <div class="content">
      <p><img src="../images/fabian-grohs-XMFZqrGyV-Q-unsplash.jpg" alt="cover"></p>
<p>Create a <a href="https://cloud.google.com/free">new account</a> on GCP. For new users, GCP credits $300 dollars in the account for 12 months and with many free services.</p>
<p>Login to your GCP account.</p>
<h2 id="create-a-new-virtual-machine">Create a new virtual machine</h2>
<p>Select <strong>Compute Engine</strong> from the top left menu.</p>
<p>Menu &gt; Compute &gt; Compute Engine</p>
<h3 id="create-a-new-project">Create a new project</h3>
<p>In GCP, a project is a resource manager. All the related resources of a project place inside it.
Create a new project <strong>demo</strong>. It will take some time to create the project.</p>
<p><img src="./images/gcp-create-project.PNG" alt="gcp-project"></p>
<h3 id="create-vm-instance">Create VM instance</h3>
<p>Click on <strong>Create</strong>.</p>
<blockquote>
<p><strong>Take the quickstart</strong> it is a small tutorial on how to create the VM.</p>
</blockquote>
<p><img src="./images/gcp-vm-create.PNG" alt="gcp-vm-i"></p>
<h3 id="basic-details">Basic Details</h3>
<p>Enter the virtual machine name. <code>gcp-vm</code>.</p>
<p>Select the nearest region.</p>
<p>Select the Series <strong>N1</strong> and machine type <strong>n1-standard-1</strong>.</p>
<p><img src="./images/gcp-vm-basic.PNG" alt="gcp-basic"></p>
<h3 id="select-the-os-and-disk-size">Select the OS and Disk size</h3>
<p>Change the OS Image to <strong>Ubuntu 16.04 LTS</strong>.
Increase the disk size to 40GB.</p>
<p><img src="./images/gcp-vm-size.PNG" alt="gcp-size"></p>
<h3 id="firewall">Firewall</h3>
<p>Allow traffic from <strong>http</strong> and <strong>https</strong>.</p>
<blockquote>
<p>This step is optional. If you don't want to manage the private key then you can skip this step. If this is not setup then GCP manages the private key on your behalf. This private key is required to remotely connect to the VM.</p>
</blockquote>
<p>Click on <strong>security</strong>.</p>
<p>Configure SSH to remotely connect to the vm using the command line.</p>
<p>Open the bash or any command line.</p>
<p>Use <code>ssh-keygen</code> command to create keys. By default, it saves these keys in <code>~/.ssh</code> directory.</p>
<pre><code>$ ssh-keygen -m PEM -t rsa -b 4096
Generating public/private rsa key pair.
Enter file in which to save the key (/c/Users/shubh/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /c/Users/shubh/.ssh/id_rsa.
Your public key has been saved in /c/Users/shubh/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:5C+NIr1JjM8Oy5R6lgCyRm0EXqhHwToQQPYtN7f0qDY shubh@LAPTOP-BAVLQDM1
The key's randomart image is:
+---[RSA 4096]----+
|=*+o             |
|+.=..            |
|o+oo + o.        |
|*..oo +o+        |
|o=.    oS.       |
|...  =.  +       |
|.  .*E= o o      |
|   +=B.+ .       |
|  .oo.*          |
+----[SHA256]-----+

</code></pre><p>Enter the absolute path where you want to save the keys or skip it and press Enter.</p>
<p>The passphrase is required to access the private key while login in the VM. This step is optional. Passphrase length should be 5 or more. Note it down.</p>
<p>Open the <code>id_rsa.pub</code> file. This is the public key.<br>
Copy the key and paste it in <strong>Enter public SSH key</strong>.</p>
<blockquote>
<p>Remove any leading or trailing spaces while pasting.</p>
</blockquote>
<p><img src="./images/gcp-vm-ssh.PNG" alt="gcp-ssh"></p>
<p>Click <strong>Create</strong>. It will take some time to create the VM.</p>
<h3 id="connect-to-the-vm">Connect to the VM</h3>
<p>Open the vm. It will show the vm details.</p>
<p>If you haven't configured the SSH then you can connect to the VM using the SSH provided by the GCP. From SSH drop-down select the <strong>Open in browser window</strong> option.</p>
<p><img src="./images/gcp-vm-connect.PNG" alt="gcp-vm-connect"></p>
<h4 id="for-ssh-configured">For SSH configured</h4>
<p>Scroll down and copy the <strong>External IP</strong>.</p>
<p>Open the bash shell or any command line.</p>
<pre><code>ssh -i &lt;absolute-private-key-path&gt; username@vmipaddress
</code></pre><p>Username is the key to the SSH.</p>
<p><img src="./images/gcp-vm-username.PNG" alt="gcp-username"></p>
<pre><code>ssh -i /c/Users/shubh/.ssh/id_rsa shubh@34.93.244.120
</code></pre><p>Enter the passphrase if you have set up it while creating the SSH keys.</p>
<p><img src="./images/gcp-vm-login.PNG" alt="gcp-vm-login"></p>
<h3 id="test-the-vm">Test the VM</h3>
<p>Install the <strong>nginx</strong> web server.</p>
<pre><code>sudo apt-get -y update
sudo apt-get -y install nginx
</code></pre><p>It will take a few seconds to install it. Once it installs.<br>
Open the browser and enter the VM IP address.</p>
<p><img src="./images/gcp-nginx.PNG" alt="gcp-nginx"></p>
<h3 id="stop-the-vm">Stop the VM</h3>
<p>You can save some money by stopping or deleting the VM when you're not using it.</p>
<p>From the top, you can <strong>Stop</strong> or <strong>Delete</strong> the VM.</p>
<p><img src="./images/gcp-vm-stop.PNG" alt="gcp-stop"></p>
<p>Next time when you'll start it only the public IP of the vm will change.</p>
<hr>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="/to-the-point/how-to-create-a-linux-vm-in-azure/">How to create a Linux VM in Azure?</a></li>
	
	<li><a href="/to-the-point/how-to-create-a-linux-vm-in-aws/">How to create a Linux VM in AWS?</a></li>
	
	<li><a href="/to-the-point/compare-strings-in-golang/">Compare Strings in Golang</a></li>
	
	<li><a href="/to-the-point/how-to-read-and-write-a-file-in-golang/">How to Read and Write a File in Golang?</a></li>
	
	<li><a href="/to-the-point/convert-string-to-int-and-int-to-string-in-golang/">Convert String to Int and Int to String in Golang</a></li>
	
</ul>
</div>
      
    </div>
    

    <div>
  <iframe style="margin-top: 20px" width="100%" height="200px" src="https://schadokar.substack.com/embed"
    frameborder="0" scrolling="no"></iframe>
</div>

  </div>
</section>



<section class="section">
  <div class="container">
    <div id="disqus_thread"></div>
    <script>

      

      

      (function () { 
        var d = document, s = d.createElement('script');
        s.src = 'https://schadokar-dev.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>
  </div>
</section>
<section class="section">
  
  <div class="container">
    <p>&copy; <a href="https://schadokar.dev">Shubham Chadokar</a> 2020</p>
    
    
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-158088106-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="\/\/matomo.example.com\/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript>
  <img src="//matomo.example.com/piwik.php?idsite=1&amp;rec=1" style="border:0" alt="" />
</noscript>

<script>
    (function(f, a, t, h, o, m){
        a[h]=a[h]||function(){
            (a[h].q=a[h].q||[]).push(arguments)
        };
        o=f.createElement('script'),
        m=f.getElementsByTagName('script')[0];
        o.async=1; o.src=t; o.id='fathom-script';
        m.parentNode.insertBefore(o,m)
    })(document, window, '\/\/fathom.example.com\/tracker.js', 'fathom');
    fathom('trackPageview');
</script>
</body>

</html>
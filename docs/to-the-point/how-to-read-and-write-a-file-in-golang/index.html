<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.62.2" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark">
<script src="https://kit.fontawesome.com/4872e84fa1.js" crossorigin="anonymous"></script>
<script data-ad-client="ca-pub-4573306041548212" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><title>How to Read and Write a File in Golang?&nbsp;&ndash;&nbsp;Shubham Chadokar</title><link rel="stylesheet" href="/css/core.min.baed723f54162a9e20038349868d8899231c6da34e419b528d15ceaccd26124ac044049c2c101c0343151212513ac955.css" integrity="sha384-uu1yP1QWKp4gA4NJho2ImSMcbaNOQZtSjRXOrM0mEkrARAScLBAcA0MVEhJROslV"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="How to Read and Write a File in Golang?" /><meta name="twitter:image" content="https://schadokar.dev/images/golang-basic.png" /><body><section id="header">
    <div class="header wrap">
        <span class="header left-side">
            <a class="site home" href="/"><span class="site name">Shubham Chadokar</span>
            </a>
        </span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/posts">Posts</a><a class="nav item" href="/to-the-point">To-The-Point</a><a class="nav item" href="/projects">Projects</a><a class="nav item" href="/ebooks">Ebook</a><a class="nav item" href="/about">About</a></nav></div></span>
    </div>
    
</section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">How to Read and Write a File in Golang?</h1><p class="article date">Tuesday, March 24, 2020<span class="reading-time"> â€¢ 8 minutes to read</span></p></section><article class="article markdown-body"><p>
            <img class="cover" src="https://schadokar.dev/images/golang-basic.png" alt>
          </p><p>In this tutorial, we will learn how to read and write files in the file system using the <code>io/ioutil</code> package.</p>
<h2 id="write-a-file-using-writefile">Write a file using WriteFile</h2>
<p>The <code>WriteFile</code> function takes 3 arguments, filename, data in a byte array, and filemode.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">WriteFile</span>(<span style="color:#a6e22e">filename</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">data</span> []<span style="color:#66d9ef">byte</span>, <span style="color:#a6e22e">perm</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">FileMode</span>) <span style="color:#66d9ef">error</span>
</code></pre></div><p>A FileMode represents a file's mode and permission bits. <a href="https://golang.org/pkg/os/#FileMode"target="_blank">Learn more</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;io/ioutil&#34;</span>
    <span style="color:#e6db74">&#34;log&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// create a byte array of a string
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">data</span> <span style="color:#f92672">:=</span> []byte(<span style="color:#e6db74">&#34;Hello Gopher!&#34;</span>)

    <span style="color:#75715e">// write data to a hello file, with 0777 file permission
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">WriteFile</span>(<span style="color:#e6db74">&#34;hello.txt&#34;</span>, <span style="color:#a6e22e">data</span>, <span style="color:#ae81ff">0777</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;%v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }
}
</code></pre></div><p>This will create a new file <code>hello.txt</code> in the current directory.</p>
<h3 id="file-mode">File mode</h3>
<p>Most file systems have methods to assign permissions or access rights to specific users and groups of users. These permissions control the ability of the users to view, change, navigate, and execute the contents of the file system. &ndash; <a href="https://en.wikipedia.org/wiki/File_system_permissions"target="_blank">wikipedia</a></p>
<p>A few examples of filemode number notation.</p>
<pre><code>0000     no permissions
0700     read, write, &amp; execute only for owner
0770     read, write, &amp; execute for owner and group
0777     read, write, &amp; execute for owner, group and others
0111     execute
0222     write
0333     write &amp; execute
0444     read
0555     read &amp; execute
0666     read &amp; write
0740     owner can read, write, &amp; execute; group can only read; others have no permissions 
</code></pre><hr>
<h2 id="read-a-file-using-readfile">Read a file using ReadFile</h2>
<p>The <code>ReadFile</code> function reads the file by its filename and returns the file data in array of byte.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ReadFile</span>(<span style="color:#a6e22e">filename</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#66d9ef">byte</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>We will read the above created <code>hello.txt</code> file. Please create a file if it is not created.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;fmt&#34;</span>
    <span style="color:#e6db74">&#34;io/ioutil&#34;</span>
    <span style="color:#e6db74">&#34;log&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

    <span style="color:#75715e">// read the hello.txt
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">content</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#e6db74">&#34;hello.txt&#34;</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;error while reading %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// convert the byte into string
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(string(<span style="color:#a6e22e">content</span>))
}
</code></pre></div><p>Output</p>
<pre><code>Hello Gopher!
</code></pre><hr>
<h2 id="write-to-an-existing-file">Write to an existing file</h2>
<h3 id="1--using-ioutil">1.  using ioutil</h3>
<p>First using <code>ReadFile</code>, we will read the content and then we will append the new content.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;io/ioutil&#34;</span>
    <span style="color:#e6db74">&#34;log&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// Read the content
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">content</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#e6db74">&#34;hello.txt&#34;</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;error while reading the file. %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }
    
    <span style="color:#75715e">//  new content
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">newText</span> <span style="color:#f92672">:=</span> []byte(<span style="color:#e6db74">&#34;\nAppended text.&#34;</span>)
    
    <span style="color:#75715e">// append the content
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">content</span> = append(<span style="color:#a6e22e">content</span>, <span style="color:#a6e22e">newText</span><span style="color:#f92672">...</span>)

    <span style="color:#75715e">// overwrite the content of hello.txt
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">WriteFile</span>(<span style="color:#e6db74">&#34;hello.txt&#34;</span>, <span style="color:#a6e22e">content</span>, <span style="color:#ae81ff">0777</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;error while writing the file. %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }
}
</code></pre></div><p>The 3 dots after <code>newText...</code> is a variadic argument. In simple terms it will extract all the array elements. <a href="https://medium.com/rungo/variadic-function-in-go-5d9b23f4c01a"target="_blank">Learn more</a></p>
<p>For Example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">a</span> = [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>]

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span><span style="color:#f92672">...</span>) =&gt; <span style="color:#66d9ef">func</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</code></pre></div><h3 id="2-using-os-package">2. using os package</h3>
<p>Using <a href="https://golang.org/pkg/os/#OpenFile"target="_blank">OpenFile</a> in the <a href="https://golang.org/pkg/os/"target="_blank">os</a> package we can open the file and append the data in it.</p>
<blockquote>
<p>Package os provides a platform-independent interface to operating system functionality.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">OpenFile</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">flag</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">perm</span> <span style="color:#a6e22e">FileMode</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">File</span>, <span style="color:#66d9ef">error</span>)
</code></pre></div><p>The <a href="https://golang.org/pkg/os/#pkg-constants"target="_blank">flag</a> parameter defines the operation on the file. The available flags are:</p>
<pre><code>    O_RDONLY int = syscall.O_RDONLY // open the file read-only.
    O_WRONLY int = syscall.O_WRONLY // open the file write-only.
    O_RDWR   int = syscall.O_RDWR   // open the file read-write.
    // The remaining values may be or'ed in to control behavior.
    O_APPEND int = syscall.O_APPEND // append data to the file when writing.
    O_CREATE int = syscall.O_CREAT  // create a new file if none exists.
    O_EXCL   int = syscall.O_EXCL   // used with O_CREATE, file must not exist.
    O_SYNC   int = syscall.O_SYNC   // open for synchronous I/O.
    O_TRUNC  int = syscall.O_TRUNC  // truncate regular writable file when opened.
</code></pre><p>Example</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;log&#34;</span>
    <span style="color:#e6db74">&#34;os&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// If the file doesn&#39;t exist, create it, or append to the file
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">file</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">OpenFile</span>(<span style="color:#e6db74">&#34;hello.txt&#34;</span>, <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">O_APPEND</span>|<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">O_CREATE</span>|<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">O_WRONLY</span>, <span style="color:#ae81ff">0777</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;error while opening the file. %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// close the file once program execution complete
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">Close</span>()

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">Write</span>([]byte(<span style="color:#e6db74">&#34;\nappended data&#34;</span>)); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;error while writing the file. %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }
}

</code></pre></div><hr>
<h2 id="read-and-write-a-json-file">Read and Write a JSON file</h2>
<p>Reading and writing the JSON file requires to unmarshal and marshal the data respectively.</p>
<p>Learn more about <a href="">How to use JSON in Golang</a></p>
<p>We are going to create a library object and a book object. The library stores the array of books.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">book</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Name</span>   <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">Author</span> <span style="color:#66d9ef">string</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">library</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Books</span> []<span style="color:#a6e22e">book</span>
}
</code></pre></div><p>Create books and library</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">    <span style="color:#75715e">// create some books
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">books</span> <span style="color:#f92672">:=</span> []<span style="color:#a6e22e">book</span>{
        {<span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;An Introduction to programming in Go&#34;</span>, <span style="color:#a6e22e">Author</span>: <span style="color:#e6db74">&#34;Caleb Doxsey&#34;</span>},
        {<span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;Go in Action&#34;</span>, <span style="color:#a6e22e">Author</span>: <span style="color:#e6db74">&#34;William Kennedy&#34;</span>},
        {<span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;The way to Go&#34;</span>, <span style="color:#a6e22e">Author</span>: <span style="color:#e6db74">&#34;IVO BALBAERT&#34;</span>},
    }

    <span style="color:#75715e">// create the library with books
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">lib</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">library</span>{<span style="color:#a6e22e">Books</span>: <span style="color:#a6e22e">books</span>}
</code></pre></div><h3 id="write-json">Write JSON</h3>
<p>The library is in golang struct format. To convert it JSON we need to marshal it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">    <span style="color:#75715e">// marshal to json or convert to json
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">libJSON</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#a6e22e">lib</span>)
</code></pre></div><p>Save it in <code>library.json</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">    <span style="color:#75715e">// write to library.json
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">WriteFile</span>(<span style="color:#e6db74">&#34;library.json&#34;</span>, <span style="color:#a6e22e">libJSON</span>, <span style="color:#ae81ff">0777</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while writing a file %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }
</code></pre></div><h3 id="read-json">Read JSON</h3>
<p>Read the <code>library.json</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">    <span style="color:#75715e">// Read the file
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">content</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#e6db74">&#34;library.json&#34;</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while reading a file %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }
</code></pre></div><p>The data is in byte. Unmarshal it to access the data.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">    <span style="color:#75715e">// create a new library
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">readLib</span> <span style="color:#a6e22e">library</span>

    <span style="color:#75715e">// unmarshal the json to library
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Unmarshal</span>(<span style="color:#a6e22e">content</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">readLib</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while unmarshal the content  %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// print all the books
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">book</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">readLib</span>.<span style="color:#a6e22e">Books</span> {

        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%v| Name: %-40s | Author: %s\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">Name</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">Author</span>)
    }
</code></pre></div><p>Output</p>
<pre><code>0| Name: An Introduction to programming in Go     | Author: Caleb Doxsey
1| Name: Go in Action                             | Author: William Kennedy
2| Name: The way to Go                            | Author: IVO BALBAERT
</code></pre><p>The output is formatted because we used a little string formatting.<br>
In the <code>Printf</code>, we have used <code>%-40s</code>.  <code>40</code> is the width. <code>-</code> align the data to left. <a href="https://gobyexample.com/string-formatting"target="_blank">Learn more</a> about string formatting.</p>
<blockquote>
<p>Width is measured in units of Unicode code points, that is, runes.<br>
For most values, width is the minimum number of runes to output, padding the formatted form with spaces if necessary.</p>
</blockquote>
<p>The complete code will look like this</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;encoding/json&#34;</span>
    <span style="color:#e6db74">&#34;fmt&#34;</span>
    <span style="color:#e6db74">&#34;io/ioutil&#34;</span>
    <span style="color:#e6db74">&#34;log&#34;</span>
)

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">book</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Name</span>   <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">Author</span> <span style="color:#66d9ef">string</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">library</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Books</span> []<span style="color:#a6e22e">book</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// create some books
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">books</span> <span style="color:#f92672">:=</span> []<span style="color:#a6e22e">book</span>{
        {<span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;An Introduction to programming in Go&#34;</span>, <span style="color:#a6e22e">Author</span>: <span style="color:#e6db74">&#34;Caleb Doxsey&#34;</span>},
        {<span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;Go in Action&#34;</span>, <span style="color:#a6e22e">Author</span>: <span style="color:#e6db74">&#34;William Kennedy&#34;</span>},
        {<span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;The way to Go&#34;</span>, <span style="color:#a6e22e">Author</span>: <span style="color:#e6db74">&#34;IVO BALBAERT&#34;</span>},
    }

    <span style="color:#75715e">// create the library with books
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">lib</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">library</span>{<span style="color:#a6e22e">Books</span>: <span style="color:#a6e22e">books</span>}

    <span style="color:#75715e">// marshal to json or convert to json
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">libJSON</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#a6e22e">lib</span>)

    <span style="color:#75715e">// write to library.json
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">WriteFile</span>(<span style="color:#e6db74">&#34;library.json&#34;</span>, <span style="color:#a6e22e">libJSON</span>, <span style="color:#ae81ff">0777</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while writing a file %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// Read the file
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">content</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#e6db74">&#34;library.json&#34;</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while reading a file %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// create a new library
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">readLib</span> <span style="color:#a6e22e">library</span>

    <span style="color:#75715e">// unmarshal the json to library
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Unmarshal</span>(<span style="color:#a6e22e">content</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">readLib</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while unmarshal the content  %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// print all the books
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">book</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">readLib</span>.<span style="color:#a6e22e">Books</span> {

        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%v| Name: %-40s | Author: %s\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">Name</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">Author</span>)
    }

}
</code></pre></div><h3 id="update-the-existing-json-file">Update the existing JSON file</h3>
<p>We will use <code>ioutil</code> for this. First, we will read <code>library.json</code> and then we add a new book in it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;encoding/json&#34;</span>
    <span style="color:#e6db74">&#34;fmt&#34;</span>
    <span style="color:#e6db74">&#34;io/ioutil&#34;</span>
    <span style="color:#e6db74">&#34;log&#34;</span>
)

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">book</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Name</span>   <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">Author</span> <span style="color:#66d9ef">string</span>
}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">library</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">Books</span> []<span style="color:#a6e22e">book</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

    <span style="color:#75715e">// Read the file
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">content</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#e6db74">&#34;library.json&#34;</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while reading a file %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// create a new library
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">readLib</span> <span style="color:#a6e22e">library</span>

    <span style="color:#75715e">// unmarshal the json to library
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Unmarshal</span>(<span style="color:#a6e22e">content</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">readLib</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while unmarshal the content  %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// before update
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Before Update&#34;</span>)

    <span style="color:#75715e">// print all the books
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">book</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">readLib</span>.<span style="color:#a6e22e">Books</span> {

        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%v| Name: %-40s | Author: %s\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">Name</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">Author</span>)
    }

    <span style="color:#75715e">// Update
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">newBook</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">book</span>{
        <span style="color:#a6e22e">Name</span>:   <span style="color:#e6db74">&#34;Go Web Programming&#34;</span>,
        <span style="color:#a6e22e">Author</span>: <span style="color:#e6db74">&#34;Sau Sheong Chang&#34;</span>,
    }

    <span style="color:#75715e">// append the new book
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">readLib</span>.<span style="color:#a6e22e">Books</span> = append(<span style="color:#a6e22e">readLib</span>.<span style="color:#a6e22e">Books</span>, <span style="color:#a6e22e">newBook</span>)

    <span style="color:#75715e">// write the book
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// marshal to json or convert to json
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">libJSON</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Marshal</span>(<span style="color:#a6e22e">readLib</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while marshal. %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// write to library.json
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">WriteFile</span>(<span style="color:#e6db74">&#34;library.json&#34;</span>, <span style="color:#a6e22e">libJSON</span>, <span style="color:#ae81ff">0777</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while writing a file %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// After Update
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;After update&#34;</span>)

    <span style="color:#75715e">// Read the file
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">content</span>, <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadFile</span>(<span style="color:#e6db74">&#34;library.json&#34;</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while reading a file %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// unmarshal the json to library
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">Unmarshal</span>(<span style="color:#a6e22e">content</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">readLib</span>)

    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatalf</span>(<span style="color:#e6db74">&#34;Error while unmarshal the content  %v&#34;</span>, <span style="color:#a6e22e">err</span>)
    }

    <span style="color:#75715e">// print all the books
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">book</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">readLib</span>.<span style="color:#a6e22e">Books</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%v| Name: %-40s | Author: %s\n&#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">Name</span>, <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">Author</span>)
    }
}
</code></pre></div><p>Output</p>
<pre><code>Before Update
0| Name: An Introduction to programming in Go     | Author: Caleb Doxsey
1| Name: Go in Action                             | Author: William Kennedy
2| Name: The way to Go                            | Author: IVO BALBAERT

After update
0| Name: An Introduction to programming in Go     | Author: Caleb Doxsey
1| Name: Go in Action                             | Author: William Kennedy
2| Name: The way to Go                            | Author: IVO BALBAERT
3| Name: Go Web Programming                       | Author: Sau Sheong Chang
</code></pre><hr>
<h2 id="references">References</h2>
<ul>
<li><a href="https://schadokar.dev/posts/how-to-use-json-in-golang/"target="_blank">How to use JSON in Golang?</a></li>
<li><a href="https://golang.org/pkg/io/ioutil/"target="_blank">Golang documentation</a></li>
</ul>
<hr>
</article><section class="article labels"><a class="category" href=/categories/tutorial/>Tutorial</a><a class="category" href=/categories/to-the-point/>to-the-point</a><a class="category" href=/categories/golang/>Golang</a><a class="tag" href=/tags/golang/>golang</a><a class="tag" href=/tags/to-the-point/>to-the-point</a></section><section class="article author"><img class="avatar" src="/images/pic.png" alt><p class="name">Shubham Chadokar</p><div class="bio">Software Engineer</div><div class="details"><a class="item" href="https://github.com/schadokar" target="_blank"><span class="iconfont icon-github"></span>&nbsp;schadokar</a><a class="item" href="https://twitter.com/schadokar1" target="_blank"><span class="iconfont icon-twitter"></span>&nbsp;@schadokar1</a><a class="item" href="mailto:hello@schadokar.dev" target="_blank"><span class="iconfont icon-email"></span>&nbsp;hello@schadokar.dev</a></div>
</section></div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/to-the-point/how-to-create-a-linux-vm-in-aws/"><span class="li iconfont icon-article"></span>How to create a Linux VM in AWS?</a></p><p><a class="link" href="/to-the-point/convert-string-to-int-and-int-to-string-in-golang/"><span class="li iconfont icon-article"></span>Convert String to Int and Int to String in Golang</a></p></section></div></section>
<section id="footer">
    <div class="footer wrap">
        <span class="footer">
                
                    <a href="https://github.com/schadokar" class="navbar-item is-hidden-desktop" title="GitHub">
                        <span
                            class="icon"><i class='fab fa-github'></i>
                        </span>
                    </a>
                
                    <a href="https://medium.com/@schadokar" class="navbar-item is-hidden-desktop" title="Medium">
                        <span
                            class="icon"><i class='fab fa-medium'></i>
                        </span>
                    </a>
                
                    <a href="https://twitter.com/schadokar1" class="navbar-item is-hidden-desktop" title="Twitter">
                        <span
                            class="icon"><i class='fab fa-twitter'></i>
                        </span>
                    </a>
                <div class="footer-wrap">
    <p class="copyright">&copy; <a href="https://schadokar.dev">Shubham Chadokar</a> 2020</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p>
</div></span>
        <span class="footer right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/newsletter">Newsletter</a><a class="nav item" href="/contact">Contact</a></nav></div></span>
    </div>
</section>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-158088106-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</body>

</html>
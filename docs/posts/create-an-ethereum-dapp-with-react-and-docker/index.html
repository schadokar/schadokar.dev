<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.62.2" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark">
<script src="https://kit.fontawesome.com/4872e84fa1.js" crossorigin="anonymous"></script><title>Create an Ethereum Dapp with React and Docker&nbsp;&ndash;&nbsp;Shubham Chadokar</title><link rel="stylesheet" href="/css/core.min.d6952daf9b9e1416674c325169c3a71ceb436c5f824d6ee2013146d3b7206ca6152d067fa14aadb42755d718bc2fdd29.css" integrity="sha384-1pUtr5ueFBZnTDJRacOnHOtDbF&#43;CTW7iATFG07cgbKYVLQZ/oUqttCdV1xi8L90p"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Create an Ethereum Dapp with React and Docker" /><meta name="twitter:image" content="https://schadokar.dev/posts/create-an-ethereum-dapp-with-react-and-docker/asset-1.png" /><body><section id="header">
    <div class="header wrap">
        <span class="header left-side">
            <a class="site home" href="/"><span class="site name">Shubham Chadokar</span>
            </a>
        </span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/posts">Posts</a><a class="nav item" href="/to-the-point">To-The-Point</a><a class="nav item" href="/projects">Projects</a><a class="nav item" href="/ebooks">Ebook</a><a class="nav item" href="/about">About</a></nav></div></span>
    </div>
    
</section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Create an Ethereum Dapp with React and Docker</h1><p class="article date">Sunday, April 14, 2019<span class="reading-time"> • 12 minutes to read</span></p></section><article class="article markdown-body"><p>
            <img class="cover" src="asset-1.png" alt>
          </p><p>In this tutorial, we’ll create an Ethereum Dapp and will run its different components in a separate docker container.</p>
<p>You can clone the project using this <a href="https://github.com/schadokar/docker-ethereum.git"target="_blank">GitHub link</a>.</p>
<p>Thanks to the people who’s article and courses helped a lot:</p>
<p><a href="https://medium.com/u/e9031892baf5"target="_blank">Brandon Morelli</a> For HTML and CSS ( <a href="https://codeburst.io/build-a-weather-website-in-30-minutes-with-node-js-express-openweather-a317f904897b"target="_blank">Build a Weather Website</a> )</p>
<p><a href="https://medium.com/u/d058882d8cd2"target="_blank">Stephen Grider</a> For <a href="https://www.udemy.com/share/1000CIAkUTc1xbQng=/"target="_blank">Ethereum</a> and <a href="https://www.udemy.com/share/100r4uAkUTc1xbQng=/"target="_blank">Docker</a> course on Udemy.</p>
<hr>
<p>Before beginning lets understand what we’re going to build and how the structure of our Dapp will look like.</p>
<p>In the Dapp there will be three modules:</p>
<p><strong>1.  ganache-cli</strong>
<strong>2.  Ethereum-Dapp and Server</strong>
<strong>3.  Client (React App)</strong></p>
<p>The above 3 modules will run in individual docker containers.</p>
<p><img  src="./asset-2.png"
        alt="D app"/></p>
<blockquote>
<p>Why we’re building individual container for each service when they all can be build in one container?</p>
</blockquote>
<p>Yeah, all can be build in one container and everything will be straight forward. Just for some fun, we’re using different containers.</p>
<hr>
<h3 id="project-setup"><strong>Project Setup</strong></h3>
<p>Create a project folder and give it the name <strong>docker-ethereum</strong>.</p>
<p><strong>Directory Structure</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">docker-ethereum
    - client
    - ethereum
    - server
    - .dockerignore
    - docker-compose.yml
    - Dockerfile
    - Dockerfile.ganache
    - package.json
</code></pre></div><h4 id="packagejson">package.json</h4>
<p>Create a <code>package.json</code> and paste the below code:</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/36140ba36e643ef5f464a31004e80006.js"></script>

<p>We have finished installing the dependencies for the project.</p>
<hr>
<p>To build any application our network should be ready. So, let’s first start with our ganache-cli as the network.</p>
<h3 id="1-ganache-cli">1. ganache-cli</h3>
<p>It is a test network which comes with 10 accounts with 100 ethers each. It is best for development where you don’t have to wait for the transactions to mine.</p>
<blockquote>
<p><a href="https://truffleframework.com/ganache"target="_blank">Ganache</a> is a personal blockchain for Ethereum development you can use to deploy contracts, develop your applications, and run tests.</p>
</blockquote>
<p>In our application ganache-cli will run in a docker container.</p>
<p>Inside the project directory, create a <code>Dockerfile.ganache</code> .</p>
<p>In this Dockerfile, we’ll write all the instructions to set up and run the ganache-cli inside the container.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/d08177076b99a0284d6c7f46b4bb9cc0.js"></script>

<ul>
<li>
<p><strong>Line 2:</strong> to build this ganache-cli image, we’re taking node:alpine as a base image.</p>
</li>
<li>
<p><strong>Line 5:</strong> we’re setting /app folder as the working directory of the image where all our instructions will run.</p>
</li>
</ul>
<p><strong>Line 8:</strong> we’re installing <strong>ganache-cli</strong> globally.</p>
<p><strong>Line 12:</strong> we’re setting <code>ganache-cli -h 0.0.0.0</code> as the default command of the image.</p>
<blockquote>
<p>Ganache-cli’s default host is 127.0.0.1 but for docker instance it is 0.0.0.0</p>
</blockquote>
<p>I have explained all the above instructions in detail in <a href="https://schadokar.dev/posts/run-the-ganache-cli-inside-the-docker-container"target="_blank">my last post</a>. Please check it, if you find any difficulty here.</p>
<p>Our network is configured.</p>
<hr>
<h3 id="2-ethereum-dapp-andserver">2. Ethereum Dapp and Server</h3>
<h4 id="ethereum-dapp">Ethereum Dapp</h4>
<p>Create a <code>Ethereum</code>folder in the project directory.</p>
<p><strong>Directory Structure</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">Ethereum
- build
- contracts
  - Message.sol
- compile.js
- deploy.js
- logic.js
- receipt-ganache.json
- web3.js
</code></pre></div><p>Inside the Ethereum directory:</p>
<h4 id="contracts"><strong>contracts</strong></h4>
<p>Create a new folder <code>contracts</code>and a new file <code>Message.sol</code> in the contracts folder and paste the below code.</p>
<script type="application/javascript" src="https://gist.github.com/schadokat/339824556db3c6f53d3172ab227cac0b.js"></script>

<p>We’re creating a simple message contract. There will be 3 functions in this smart contract</p>
<ol>
<li>constructor</li>
<li>setMessage</li>
<li>getMessage</li>
</ol>
<p>In the Message smart contract when it will run for the first time, that time the <code>constructor</code>will set the message as the initial message.</p>
<p>The <code>setMessage</code> function will set a new message.</p>
<p>The <code>getMessage</code> is a view function and it’ll return the value of the message variable which was set either by <code>constructor</code> or <code>setMessage</code> .</p>
<h4 id="compilejs">compile.js</h4>
<p>Create a new file <code>compile.js</code> and paste the below code in it. This will compile the <code>Message.sol</code>smart contract and save the compiled contract in the <code>build</code> folder as <code>Message.json</code> .</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/339824556db3c6f53d3172ab227cac0b.js"></script>

<h4 id="web3js">web3.js</h4>
<p>Create a <code>web3.js</code> file which will work as a bridge between the application and the ethereum network.</p>
<blockquote>
<p><strong>web3.js</strong> is a collection of libraries which allow you to interact with a local or remote Ethereum node, using an HTTP, WebSocket or IPC connection.</p>
</blockquote>
<p>web3.js can be used in 2 ways,</p>
<ol>
<li><strong>server-side web3js:</strong> transaction signed on the server side</li>
<li><strong>client-side web3js:</strong> transaction signed on the browser side. In this web3js invoked by third-party like <strong>Mist or Metamask</strong>. In the client-side web3js invoked in the html pages.</li>
</ol>
<p>For this project, we’re using server-side web3js.</p>
<p>Copy and paste the below code to the <code>web3.js</code></p>
<script type="application/javascript" src="https://gist.github.com/schadokar/2ed83ae1f7a45cff6da974d989f0abcd.js"></script>

<blockquote>
<p>Take note of web3 provider <code>http://ganache:8545</code> . Here, <strong>ganache</strong> is the name of the container in which ganache-cli is running.</p>
</blockquote>
<h4 id="deployjs">deploy.js</h4>
<p>Create a <code>deploy.js</code> file and paste the below code in it. It will take the compiled contract <code>Message.json</code> and deploy the contract to the network.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/7ca4cd7655cf27e93432fd4fe60a1689.js"></script>

<p>From the <code>web3.js</code> file, <code>deploy.js</code> import the <code>web3</code> instance of <code>ganache-cli</code> and <code>web3network</code> as <code>ganache</code> .</p>
<h4 id="logicjs">logic.js</h4>
<p>Create a new file <code>logic.js</code> and paste the below code in it. It consists of all the logic to interact with the deployed <code>Message</code> contract on the network.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/7ca4cd7655cf27e93432fd4fe60a1689.js"></script>

<p>There are 3 functions inside the <code>logic.js</code></p>
<ol>
<li><strong>getContractObject</strong> it will return the contract object/instance which was deployed on the network using <code>deploy.js</code> . This object will then call the smart contract.</li>
<li><strong>setMessage</strong> it requires 1 string argument and set this as a message to the <code>message</code> variable in the smart contract.</li>
<li><strong>getMessage</strong> will return the message set either by <code>constructor</code> or <code>setMessage</code></li>
</ol>
<p>The <code>ethereum</code> module is complete.</p>
<p>Now, <code>server</code> needs to be set up which will call the <code>ethereum</code> module.</p>
<h3 id="server">server</h3>
<p>Create a <code>server</code> folder in the project directory.</p>
<p><strong>Directory Structure</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">server
  - routes
    - contract-API.js
    - smart-contract-API.js
  - index.js
</code></pre></div><h4 id="routes">routes</h4>
<p>Create a <code>routes</code> folder inside the <code>server</code> folder.</p>
<p><strong>contract-API.js</strong></p>
<p>Create a <code>contract-API.js</code> file and paste the below the code.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/b921307da98fb5e704698488cba44b5b.js"></script>

<p>To compile and deploy the contract we have created APIs instead of manually compiling and deploying it on the network.</p>
<p>If you remember, our <code>Message</code> smart contract’s constructor requires an initial message. To keep it simple, by default we’re setting initial message as <code>Hello World!</code> . You can change it in the deploy router.</p>
<h4 id="smart-contract-apijs">smart-contract-API.js</h4>
<p>Create a <code>smart-contract-API.js</code> and paste the below code.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/f560e7d20bdbfb225277124ce8508f25.js"></script>

<p><code>smart-contract-API.js</code> routers will call <code>setMessage</code> and <code>getMessage</code> from <code>logic.js</code></p>
<h4 id="indexjs">index.js</h4>
<p>Create a <code>index.js</code> file in the<code>server</code> folder and paste the below code.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/5aeb887f21d71a36bbe6effaf0b3b4bd.js"></script>

<p>This is the server for ethereum dapp.</p>
<p>At the top, we’re importing routes <code>contract-API.js</code> and <code>smart-contract-API.js</code> . The server is listening at the port <code>4000</code> .</p>
<p>The server module is complete here.</p>
<p>Let’s dockerize it.</p>
<h4 id="dockerfile">Dockerfile</h4>
<p>Create a <code>Dockerfile</code> in the root project directory and paste the below code.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/7a88016d2992c46c338bd815c095258d.js"></script>

<p>The docker image will create according to Dockerfile.</p>
<ul>
<li><code>node:alpine</code> To create an image we require a base image which comes with some pre-requisite software. Our server and ethereum are dependent on <code>node</code> that’s why we are using <code>node:alpine</code> as a base image. <code>alpine</code> in short, is the minimum required libraries to run a node application.</li>
<li><code>WORKDIR /app</code> setting <code>/app</code> directory of base image as the working directory.</li>
<li>Line 8 &amp; 9 Installing the pre-requisite software for the ethereum dapp like <code>python</code> is required to install the <code>web3</code> library.</li>
<li><code>COPY ./package.json .</code> Copy <code>package.json</code>in <code>/app</code> directory</li>
<li><code>RUN npm install</code> Install the dependencies mentioned in <code>package.json</code></li>
<li><code>COPY . .</code> Copy the complete root directory and paste in the <code>/app</code> directory</li>
<li><code>CMD [&quot;npm&quot;,&quot;start&quot;]</code> set the default command</li>
</ul>
<p>If you noticed we are copying the complete root directory which includes <code>node_modules</code> . This will make the image large and it makes no sense as we’re installing it from the copied <code>package.json</code> inside the image.</p>
<p>To ignore the files or folders while building the docker image just like the <code>.gitignore</code> in docker there is <code>.dockerignore</code> file.</p>
<h4 id="dockerignore">.dockerignore</h4>
<p>Create a <code>.dockerignore</code> file and paste the below code.</p>
<pre><code class="language-node" data-lang="node">node_modules/

client/
</code></pre><p>It will ignore the <code>node_modules</code> and <code>client</code> directory which we’ll create in the next section. If we don’t ignore the <code>client</code> directory then it will copy the client application too.</p>
<p>Now, we can move to our last module React application the <code>client</code> .</p>
<hr>
<h3 id="3-client-react-application">3. Client (React Application)</h3>
<p>For the react application, we’re using <code>create-react-app</code> tool for the Dapp.</p>
<blockquote>
<p>Create React App is a tool (built by developers at Facebook) that gives you a massive head start when building React apps. It saves you from time-consuming setup and configuration. — <a href="https://blog.teamtreehouse.com/getting-started-create-react-app-tool"target="_blank">treehouse</a></p>
</blockquote>
<p><strong>Installing Create React App</strong></p>
<p>We need to install the <code>create-react-app</code>globally. Open your Terminal or console and run:</p>
<pre><code class="language-node" data-lang="node">npm install -g create-react-app
</code></pre><p>From the project directory, open the terminal or console to create the react app by name <code>client</code> and run the below command.</p>
<pre><code class="language-node" data-lang="node">create-react-app client
</code></pre><p><strong>Directory Structure</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">client</span>
<span style="color:#f92672">-</span> <span style="color:#66d9ef">public</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">favicon</span>.<span style="color:#a6e22e">ico</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">index</span>.<span style="color:#a6e22e">html</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">manifest</span>.<span style="color:#a6e22e">json</span>
<span style="color:#f92672">-</span> <span style="color:#a6e22e">src</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">App</span>.<span style="color:#a6e22e">css</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">App</span>.<span style="color:#a6e22e">js</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">App</span>.<span style="color:#a6e22e">test</span>.<span style="color:#a6e22e">js</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">index</span>.<span style="color:#a6e22e">css</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">index</span>.<span style="color:#a6e22e">js</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">logo</span>.<span style="color:#a6e22e">svg</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">message</span>.<span style="color:#a6e22e">js</span>
  <span style="color:#f92672">-</span> <span style="color:#a6e22e">serviceWorker</span>.<span style="color:#a6e22e">js</span>
<span style="color:#f92672">-</span> .<span style="color:#a6e22e">dockerignore</span>
<span style="color:#f92672">-</span> <span style="color:#a6e22e">Dockerfile</span>
<span style="color:#f92672">-</span> <span style="color:#66d9ef">package</span><span style="color:#f92672">-</span><span style="color:#a6e22e">lock</span>.<span style="color:#a6e22e">json</span>
<span style="color:#f92672">-</span> <span style="color:#66d9ef">package</span>.<span style="color:#a6e22e">json</span>
<span style="color:#f92672">-</span> <span style="color:#a6e22e">README</span>.<span style="color:#a6e22e">md</span>
</code></pre></div><p>Once the <code>client</code> is created you will see a folder structure like above except <code>message.js</code> inside the <code>src</code> ,<code>Dockerfile</code> and <code>.dockerignore</code>.</p>
<p>For more information on react please follow the below links:</p>
<ul>
<li><a href="https://facebook.github.io/create-react-app/docs/getting-started"target="_blank">https://facebook.github.io/create-react-app/docs/getting-started</a></li>
<li><a href="https://blog.teamtreehouse.com/getting-started-create-react-app-tool"target="_blank">https://blog.teamtreehouse.com/getting-started-create-react-app-tool</a></li>
</ul>
<h4 id="indexhtml">index.html</h4>
<p>Open <code>index.html</code> from the <code>public</code> folder and change the title to <code>Message App</code> . Add the below link in the <code>&lt;head&gt;</code> tag. This is the fonts which are used in the application.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;https://fonts.googleapis.com/css?family=Open+Sans:300&#39;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;stylesheet&#39;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;text/css&#39;</span>&gt;
</code></pre></div><h4 id="appcss">App.css</h4>
<p>Open the <code>App.css</code> from the <code>src</code> folder and paste the <code>css</code> from this <a href="https://gist.github.com/schadokar/7635212e2a284bf6055f806f8fc1f664"target="_blank">link</a>.</p>
<h4 id="messagejs">message.js</h4>
<p>Create a <code>message.js</code> in the <code>src</code> folder and paste the below code. This is the file which will work as the front-end of the application.</p>
<blockquote>
<p>Note: I am not good at React so I can just give details of methods which are used in it.</p>
</blockquote>
<script type="application/javascript" src="https://gist.github.com/schadokar/e71322f0e16824363824c19beff01863.js"></script>

<p>A component is the building block of any react app. To create a component it requires <code>Component</code> module from <code>react</code>the library. The endpoint is set to <code>http://localhost:4000</code> as the server is running at <code>4000</code> port.</p>
<p>To make any request to the server <code>axios</code> library is used. To learn more about it follow this <a href="https://www.npmjs.com/package/axios"target="_blank">link</a>.</p>
<p>Open the terminal from the <code>client</code> directory and run the below command:</p>
<pre><code class="language-node" data-lang="node">npm install axios --save
</code></pre><p>We have created a <code>Message</code> component by extending the <code>Component</code> and at the bottom exported the <code>Message</code> .</p>
<p>There are 2 states in the <code>Message</code> component <code>message</code> and <code>output</code> .</p>
<p>States are the data which defines and control the behaviour of the component. Learn more about states in this <a href="https://facebook.github.io/react-native/docs/state"target="_blank">link</a>.</p>
<p>The <code>message</code>state will store the message entered in the form and this state will use as an argument to send the POST request to <code>localhost:4000/</code> to <code>setMessage</code>.</p>
<p>The <code>output</code> state will store the response from the server and display it.</p>
<p>Following methods are used in <code>message.js</code> :</p>
<ul>
<li><code>onChange</code> set the <code>message</code> state according to the entered input</li>
<li><code>onsubmitcompile</code> send the request to <code>localhost:4000/compile</code> to compile the smart contract</li>
<li><code>onsubmitdeploy</code> send the request to <code>localhost:4000/deploy</code> to deploy the smart contract</li>
<li><code>onsubmitsetmsg</code> send the request to <code>localhost:4000/</code> with <code>message</code> state as an argument to set the message to the smart contract</li>
<li><code>onsubmitgetmsg</code> send the request to <code>localhost:4000/</code> to get the message from the smart contract</li>
</ul>
<h4 id="appjs">App.js</h4>
<p>Open the <code>App.js</code> from <code>src</code> folder and paste the below code. The application’s <code>Route</code> set at <code>/</code> . On this route, it will serve the <code>message.js</code> component.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/53316a76761d6cb15c280a69185a4341.js"></script>

<p>To create the route <code>react-router-dom</code> library is used.</p>
<p>Open the terminal from <code>client</code> directory and run the below command:</p>
<pre><code class="language-node" data-lang="node">npm install react-router-dom --save
</code></pre><h4 id="dockerfile-1">Dockerfile</h4>
<p>With this Dockerfile our client module will complete.</p>
<p>In this Dockerfile we will write the instruction to create the image of the react application.</p>
<p>Create a <code>Dockerfile</code> in the <code>client</code> directory and paste the below code.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/f8e954b7d9c39e447ad05e60247e5dcc.js"></script>

<p>All the commands are self-explanatory. According to this Dockerfile, a docker image will build. The client (react-app) will run inside the container using this image.</p>
<p>The <code>COPY</code> command is copying the <code>node_modules</code> too. Create a <code>.dockerignore</code> .</p>
<p><strong>.dockerignore</strong></p>
<p>Create a <code>.dockerignore</code> file in the client directory and paste the below code.</p>
<pre><code>node_modules/
</code></pre><p>Our client module is also finished.</p>
<hr>
<p>Everything is set. Now, the last thing we have to do, build these docker images and run them as individual containers.</p>
<h4 id="docker-composeyml">docker-compose.yml</h4>
<p>Create a <code>docker-compose.yml</code> in the root project directory and paste the below code.</p>
<script type="application/javascript" src="https://gist.github.com/schadokar/1852d9d4e7056640c9342b3da01d3dc5.js"></script>

<p>You might be thinking about why we even need <code>docker-compose.yml</code> .</p>
<p>It just makes the application bit smooth. How?</p>
<blockquote>
<p>Compose is a tool for defining and running multi-container Docker applications.</p>
</blockquote>
<p>We have created 3 Dockerfile for the 3 modules of the application. If we don’t use the <code>docker-compose.yml</code> then we have to separately build the 3 images and then run them separately in 3 different terminals. So, that’s a drag.</p>
<p>In <code>docker-compose.yml</code> we can define all the containers’ configuration and all can be run with a single command.</p>
<ul>
<li><code>version</code> the version of a docker-compose file</li>
<li><code>services</code> all the containers’ definition.</li>
</ul>
<p>There are 3 services/containers:</p>
<p><strong>1. ganache</strong></p>
<ul>
<li><code>ganache</code> is the name of the container</li>
<li><code>build</code> where to find the Dockerfile to build. If we don’t give the name of Dockerfile then by default it builds the <code>Dockerfile</code> . For <code>ganache</code> we have created <code>Dockerfile.ganache</code> . Its syntax will be a little different. Under the <code>build</code> there is <code>context</code> it is a path of <code>Dockerfile</code> and <code>dockerfile</code> name of the <code>Dockerfile</code> .</li>
<li><code>ports</code> A container is isolated from outside which means whatever request we will try to make from the outside of the container it will not respond. That’s why we set the <code>ports</code> which maps the outside’s port to container’s port. Here we mapped port<code>8545</code> to <code>8545</code>if we make any request from outside to <code>8545</code> it will send the request to the container at <code>8545</code> .</li>
</ul>
<p><strong>2. dapp</strong></p>
<ul>
<li><code>dapp</code> is the name of the container.</li>
<li><code>build</code> find the <code>Dockerfile</code> in current directory <code>.</code></li>
<li><code>ports</code> map the ports at <code>4000:4000</code></li>
<li><code>depends_on</code> start after the <code>ganache</code></li>
</ul>
<p><strong>3. react</strong></p>
<ul>
<li><code>react</code> is the name of the container</li>
<li><code>build</code> find the <code>Dockerfile</code> in <code>client</code> directory</li>
<li><code>ports</code> map the ports at <code>3000:3000</code></li>
<li><code>depends_on</code> start after the <code>dapp</code></li>
</ul>
<p>To learn more about <code>docker-compose.yml</code> follow this <a href="https://docs.docker.com/compose/overview/"target="_blank">link</a>.</p>
<hr>
<p>So, the hard part is over. Now, the fun part let’s run the application.</p>
<p>Open the terminal from the root project directory and run the below command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-docker" data-lang="docker">docker-compose up --build<span style="color:#960050;background-color:#1e0010">
</span></code></pre></div><p>It will check for <code>docker-compose.yml</code> file in the current directory and will run it. For the first time, it will take some time so have patience.</p>
<p>Once everything is running, open the browser and go to <code>localhost:3000</code> you’ll see the react application running.</p>
<p><img  src="./asset-3.png"
        alt="localhost:3000"/></p>
<ul>
<li><strong>Compile Contract:</strong> You’ll see the message as compiled successfully.</li>
</ul>
<p><img  src="./asset-4.png"
        alt="compile contract"/></p>
<ul>
<li><strong>Deploy contract:</strong> It will send back the address of the contract at which it is deployed.</li>
</ul>
<p><img  src="./asset-5.png"
        alt="deploy contract"/></p>
<p><strong><em>Note:</em></strong> <strong><em>After compile or deploy command wait for a couple of seconds before running any other commands as both commands restart the server. Why?</em></strong></p>
<p><strong><em>On compile, it saves the compiled contract in build, if the server doesn’t restart then it will use the last compiled contract to deploy the contract.</em></strong></p>
<p><strong><em>On deploy, it saves the receipt in which deployed contract address is saved, if the server doesn’t restart, it will interact with the last deployed contract as the server is still using the last deployed contract’s address.</em></strong></p>
<ul>
<li><strong>Get Message:</strong> If you remember we set the initial message as <code>Hello World!</code></li>
</ul>
<p><img  src="./asset-6.png"
        alt="Hello World!"/></p>
<ul>
<li><strong>Set Message:</strong> Set the message and it’ll return the transaction hash of the transaction. I set the message as <strong>“Docker Ethereum Dapp”</strong> and <strong><em>“ 0x464385a1914b0d8ffb48d660aa55d419f0afe040e0def20ff581338bbce545e2”</em></strong> is the transaction hash.</li>
</ul>
<p><img  src="./asset-7.png"
        alt="Set Message"/></p>
<p>Check the message using “Get Message”</p>
<p><img  src="./asset-8.png"
        alt="Get Message"/></p>
<p>We successfully created the Ethereum Dapp with React and Docker.</p>
<p>You don’t have to build the <code>docker-compose.yml</code> every time. Next time you just have to run the below command to run the application.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-docker" data-lang="docker">docker-compose up<span style="color:#960050;background-color:#1e0010">
</span></code></pre></div><p>You can clone the complete project from the <a href="https://github.com/schadokar/docker-ethereum.git"target="_blank">GitHub link</a>.</p>
<hr>
</article><section class="article labels"><a class="category" href=/categories/tutorial/>Tutorial</a><a class="category" href=/categories/blockchain/>Blockchain</a><a class="category" href=/categories/2019/>2019</a><a class="tag" href=/tags/blockchain/>blockchain</a><a class="tag" href=/tags/ethereum/>ethereum</a><a class="tag" href=/tags/tutorial/>tutorial</a></section><section class="article author"><img class="avatar" src="/images/pic.png" alt><p class="name">Shubham Chadokar</p><div class="bio">Software Engineer</div><div class="details"><a class="item" href="https://github.com/schadokar" target="_blank"><span class="iconfont icon-github"></span>&nbsp;schadokar</a><a class="item" href="https://twitter.com/schadokar1" target="_blank"><span class="iconfont icon-twitter"></span>&nbsp;@schadokar1</a><a class="item" href="mailto:hello@schadokar.dev" target="_blank"><span class="iconfont icon-email"></span>&nbsp;hello@schadokar.dev</a></div>
</section></div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/posts/hyperledger-fabric-installation-guide/"><span class="li iconfont icon-article"></span>Hyperledger Fabric Installation Guide!</a></p><p><a class="link" href="/posts/run-the-ganache-cli-inside-the-docker-container/"><span class="li iconfont icon-article"></span>Run the Ganache Cli Inside the Docker Container</a></p></section><section class="article discussion"><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "schadokar" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></section></div></section>
<section id="footer">
    <div class="footer wrap">
        <span class="footer">
                
                    <a href="https://github.com/schadokar" class="navbar-item is-hidden-desktop" title="GitHub">
                        <span
                            class="icon"><i class='fab fa-github'></i>
                        </span>
                    </a>
                
                    <a href="https://medium.com/@schadokar" class="navbar-item is-hidden-desktop" title="Medium">
                        <span
                            class="icon"><i class='fab fa-medium'></i>
                        </span>
                    </a>
                
                    <a href="https://twitter.com/schadokar1" class="navbar-item is-hidden-desktop" title="Twitter">
                        <span
                            class="icon"><i class='fab fa-twitter'></i>
                        </span>
                    </a>
                <div class="footer-wrap">
    <p class="copyright">&copy; <a href="https://schadokar.dev">Shubham Chadokar</a> 2020</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p>
</div></span>
        <span class="footer right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/newsletter">Newsletter</a><a class="nav item" href="/contact">Contact</a></nav></div></span>
    </div>
</section>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-158088106-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</body>

</html>